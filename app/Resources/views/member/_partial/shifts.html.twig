{% set firstShiftDate = member.firstShiftDate %}

{% if member.isCurrentlyExemptedFromShifts() %}
    <div class="row">
        {% set firstCurrentMembershipShiftExemption = member.getCurrentMembershipShiftExemptions().first %}
        <div class="card-panel teal white-text">
            <i class="material-icons small left">beach_access</i>
            <strong>Compte exempté de créneau !</strong>
            <br />
            ({{ firstCurrentMembershipShiftExemption.shiftExemption }}) jusqu'au {{ firstCurrentMembershipShiftExemption.end | date_fr_full }}
        </div>
    </div>
{% endif %}

{% if use_fly_and_fixed %}
    <div class="row">
        <h6>Créneau fixe</h6>
        {% if period_positions %}
            {% for period_position in period_positions %}
                <div class="col s12 m6 l4">
                    {% include "user/_partial/period_position_card.html.twig" with { period_position: period_position, show_actions: true } %}
                </div>
            {% endfor %}
        {% else %}
            <p>Pas de créneau fixe</p>
        {% endif %}
    </div>
{% endif %}

{% for cycle, shifts in shifts_by_cycle %}
    <div class="row">
        <h6>
            {% if cycle == -1 %}
                Cycle précédent
            {% elseif cycle == 0 %}
                Cycle en cours
            {% elseif cycle == 1 %}
                Prochain cycle
            {% endif %}
            (du {{ membership_service.startOfCycle(member,cycle) | date_fr_long }} au {{ membership_service.endOfCycle(member,cycle) | date_fr_long }})
        </h6>
        {% if shifts | length == 0 %}
            Pas de créneau
        {% endif %}
        {% for shift in shifts %}
            <div class="col s12 m6 l4">
                {% include "user/_partial/shift_card.html.twig" with { shift: shift } %}
            </div>
        {% endfor %}
    </div>
{% endfor %}

<p>Date du tout premier créneau : {% if firstShiftDate %}{{ firstShiftDate|date_fr_full }}{% else %}Néant{% endif %}</p>
